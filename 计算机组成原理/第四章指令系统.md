# 指令格式

指令是计算机运行的最小功能单位。

### 4.1.1指令的基本格式

指令格式：

- 地址码：指出被操作信息(指令或数据)的地址
- 操作码：指出指令中该指令应该执行什么性质的操作和具有何种功能

**指令的字长和机器字长没有固定的关系，它可以等于机器字长，也可以大于或小于机器字长。** 通常把指令长度等于机器字长称为单字长指令。

指令格式：

- 零地址指令，只给出操作码，没有显示地址。有两种可能：1、不需要操作数，如停机、关中断；2、参与运算的操作数隐藏在栈顶。
- 一地址指令：也分为两种：1、只有目的操作数的指令，如取反、加一等，指令含义OP($A_1$)->$A_1$；隐含目的地址的双操作数指令
- 二地址指令:指令含义($A_1$)OP($A_2$)->$A_1$
- 三地址指令：($A_1$)OP($A_2$)->$A_3$
- 四地址指令：($A_1$)OP($A_2$)->$A_3$,$A_4$为下一条要执行指令的地址

### 4.1.2扩展操作码指令格式

假设指令字长16位

4位操作码(15条三地址指令)

0000  $A_1$  $A_2$  $A_3$

0001  $A_1$  $A_2$  $A_3$

…………………………

1110  $A_1$  $A_2$  $A_3$

8位操作码(15条二地址指令)

1111  0000  $A_1$  $A_2$

1111  0001  $A_1$  $A_2$

…………………………

1111  1110  $A_1$  $A_2$

12位操作码(15条一地址指令)

1111  1111  0000  $A_1$

1111  1111  0001  $A_1$

…………………………

1111  1111  1110  $A_1$

16位操作码(16条零地址指令)

1111  1111  1111  0000

1111  1111  1111  0001

…………………………

1111  1111  1111  1111

设计操作码注意事项

- 不允许短码是长码的前缀，即短操作码不能与长操作码的前面部分的代码相同
- 各指令的操作码不能重复

# 指令寻址方式

### 4.2.1指令寻址和数据寻址

- 指令寻址：寻找下一条要执行指令的地址
    - 顺序寻址：$(PC)+1$
    - 跳跃寻址：通过转移指令实现，**修改PC值，所以下一条指令仍然通过PC给出**
- 数据寻址：指令中表示一个操作数的地址，方式很多，通常在指令字中设置一个字段，用来指明那种寻址方式

| 操作码 | 寻址特征 | 形式地址A |

### 4.2.2常见的数据寻址方式